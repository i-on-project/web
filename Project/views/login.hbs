<br><div class="row justify-content-center">
    <div class="col-md-4">
		<h2 class="text-center">Iniciar sessão</h2><br>
		
        <form action="/login" method="POST">

			<!-- Email -->
            <div class="form-group">
                <label class="col-form-labels">Email institucional:</label>
                <input type="text" id="email" class="form-control"/>
                <p>Dominios disponiveis: {{this.allowed_domains}}</p>
            </div>

			<!-- Submit button -->
            <div class="form-group">
				<button type="submit" class="form-control btn btn-dark" id="submit-button" onclick="submitFunction()">Iniciar sessão</button>
            </div>

            <div id="loading"></div>
        </form>
    </div>
</div>

<script>
    async function submitFunction() {
        // Deactivate button
        const button = document.querySelector('#submit-button');
        button.disabled = true;

        // Notificate the user that authentication is in progress
        document.querySelector("#loading").innerHTML += 
        ' <br><br> ' + 
        ' <div class="d-flex justify-content-center"> ' + 
            ' <p> Autenticação em progresso ..</p> ' + 
            ' <div class="spinner-border" role="status">' + 
                '<span class="sr-only">Loading...</span>' +
            '</div>' + 
        '</div>'

        // Request to auth api
        const data = {
            'email' : document.querySelector('#email').value
        };

        const response = await fetch("/auth-api/email", {
            method: 'POST', // *GET, POST, PUT, DELETE, etc.
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data), // body data type must match "Content-Type" header
        });

        console.log("response: " + JSON.stringify(response.json())); // parses JSON response into native JavaScript objects

        console.log("login hbs Email: " + JSON.stringify(data));

    }
</script>